<!DOCTYPE html>
<html>

<head>
    <title>Geosmin</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="static/img/favicons/favicon180.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="static/img/favicons/favicon32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="static/img/favicons/favicon96.png">
    <link rel="icon" type="image/png" sizes="180x180" href="static/img/favicons/favicon180.png">
    <link rel="icon" type="image/png" sizes="512x512" href="static/img/favicons/favicon512.png">
    <link rel="manifest" href="static/site.webmanifest">

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>

<body>
    <h2>Geosmin</h2>
    <div x-data="{
        notes: [],
        content:'',

        async getNoteTree() {
            this.notes = await (await fetch('tree')).json();
        },

        async getNoteContent(id){
            const result=await (await fetch('note/'+id)).json();
            this.content = result.content;
            //console.log(result);
        }
    }" x-init="getNoteTree">
        <template x-for="note in notes"></template>
        <p><a x-text="note.title" href="#" @click="getNoteContent(note.id)"></a></p>
        </template>
        <div><textarea x-model="content" /></div>
        <div x-text="content"></div>
    </div>
</body>

</html>